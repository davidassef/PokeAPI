<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ 'tabs.ranking' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar color="primary">
      <ion-title size="large">{{ 'tabs.ranking' | translate }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="ranking-header">
    <div class="ranking-title-row">
      <ion-icon name="trophy" class="ranking-title-icon"></ion-icon>
      <h2>PokÃ©mons mais amados</h2>
    </div>
    <p>Ranking global dos PokÃ©mons mais capturados.</p>
    <div class="ranking-title-underline"></div>
  </div>

  <div class="ranking-list" *ngIf="!loading && currentRanking.length > 0">
    <!-- PÃ³dio real centralizado -->
    <div class="ranking-podium-flex">
      <div *ngIf="currentRanking.length > 1" class="podium-card podium-second">
        <span class="podium-medal floating" title="Medalha de Prata">ğŸ¥ˆ</span>
        <span class="capture-count-badge">
          <ion-icon name="heart" color="danger"></ion-icon>
          {{ currentRanking[1].favoriteCount }}
        </span>
        <app-pokemon-card [pokemon]="currentRanking[1].pokemon"></app-pokemon-card>
      </div>
      <div *ngIf="currentRanking.length > 0" class="podium-card podium-first">
        <span class="podium-crown floating" title="CampeÃ£o">ğŸ‘‘</span>
        <span class="capture-count-badge">
          <ion-icon name="heart" color="danger"></ion-icon>
          {{ currentRanking[0].favoriteCount }}
        </span>
        <app-pokemon-card [pokemon]="currentRanking[0].pokemon"></app-pokemon-card>
      </div>
      <div *ngIf="currentRanking.length > 2" class="podium-card podium-third">
        <span class="podium-medal floating" title="Medalha de Bronze">ğŸ¥‰</span>
        <span class="capture-count-badge">
          <ion-icon name="heart" color="danger"></ion-icon>
          {{ currentRanking[2].favoriteCount }}
        </span>
        <app-pokemon-card [pokemon]="currentRanking[2].pokemon"></app-pokemon-card>
      </div>
    </div>
    <!-- Grid dos demais cards -->
    <div class="ranking-grid-flex">
      <div *ngFor="let item of currentRanking.slice(3); let i = index" class="ranking-card-grid">
        <span class="capture-count-badge">
          <ion-icon name="heart" color="danger"></ion-icon>
          {{ item.favoriteCount }}
        </span>
        <div class="grid-badge" [title]="(i+4) + 'Âº Lugar'">
          <span>{{ i + 4 }}</span>
        </div>
        <app-pokemon-card [pokemon]="item.pokemon"></app-pokemon-card>
      </div>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="dots"></ion-spinner>
    <p>{{ 'ranking_page.loading_ranking' | translate }}</p>
  </div>

  <div *ngIf="!loading && viewMode === 'local' && currentRanking.length === 0" class="empty-state">
    <ion-icon name="trophy" size="large" color="medium"></ion-icon>
    <h2>{{ 'ranking_page.no_local_ranking' | translate }}</h2>
    <p>{{ 'ranking_page.add_favorites_for_ranking' | translate }}</p>
    <ion-button fill="outline" routerLink="/tabs/home">
      {{ 'ranking_page.EXPLORE_POKEMON' | translate }}
    </ion-button>
  </div>

  <div *ngIf="!loading && viewMode === 'global' && currentRanking.length === 0" class="empty-state">
    <ion-icon name="trophy" size="large" color="medium"></ion-icon>
    <h2>{{ 'ranking_page.no_global_ranking' | translate }}</h2>
    <p>{{ 'ranking_page.no_global_ranking_desc' | translate }}</p>
    <ion-button fill="outline" routerLink="/tabs/home">
      {{ 'ranking_page.EXPLORE_POKEMON' | translate }}
    </ion-button>
  </div>

  <div class="ranking-info" *ngIf="!loading && currentRanking.length > 0">
    <ion-card class="info-card">
      <ion-card-header>
        <ion-card-title>{{ 'ranking_page.ranking_info' | translate }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="info-item">
          <ion-icon name="information-circle" color="primary"></ion-icon>
          <span>
            {{ viewMode === 'global' ? ('ranking_page.global_ranking_info' | translate) : ('ranking_page.local_ranking_info' | translate) }}
          </span>
        </div>
        <div class="info-item">
          <ion-icon name="time" color="medium"></ion-icon>
          <span>{{ 'ranking_page.updated_daily' | translate }}</span>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>


<div class="details-modal-overlay" (click)="onClose($event)">
  <div class="details-modal-container" (click)="$event.stopPropagation()">
    <!-- Botão de fechar destacado -->
    <button #closeBtn class="close-btn glow" type="button" (click)="onClose($event)" tabindex="0">&times;</button>
    <!-- Hero centralizado -->
    <div class="hero-section-premium">
      <span class="pokemon-id" *ngIf="pokemon && pokemon.id !== undefined">{{ pokemon.id | pokemonId }}</span>
      <div class="pokemon-image-glow">
        <img
          [src]="getCurrentImage()"
          [alt]="pokemon?.name"
          class="pokemon-main-image bounce-animation"
          (error)="onImageError($event)">
      </div>
      <h1 class="pokemon-name sci-fi-title">{{ pokemon?.name | titlecase }}</h1>
      <div class="type-chips-premium">
        <ion-chip
          *ngFor="let type of pokemon?.types"
          [style.background]="type.type.name | typeColor"
          class="type-chip-premium"
          [ngClass]="'type-' + type.type.name">
          <span class="type-icon" [innerHTML]="getTypeIcon(type.type.name)"></span>
          <ion-label>{{ type.type.name | titlecase }}</ion-label>
        </ion-chip>
      </div>
    </div>
    <!-- Painéis agrupados e centralizados -->
    <div class="info-panels-premium" *ngIf="!loading && pokemon">
      <div class="basic-info-panel-premium">
        <ion-card class="info-card premium-glass">
          <ion-card-header>
            <ion-card-title>Informações Básicas</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Altura</span>
                <span class="value">{{ pokemon.height | pokemonHeight }}</span>
              </div>
              <div class="info-item">
                <span class="label">Peso</span>
                <span class="value">{{ pokemon.weight | pokemonWeight }}</span>
              </div>
              <div class="info-item">
                <span class="label">Experiência Base</span>
                <span class="value">{{ pokemon.base_experience || 'N/A' }}</span>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
        <ion-card class="abilities-card premium-glass">
          <ion-card-header>
            <ion-card-title>Habilidades</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="abilities-list">
              <ion-chip
                *ngFor="let ability of pokemon.abilities"
                [outline]="ability.is_hidden"
                [color]="ability.is_hidden ? 'warning' : 'primary'">
                <ion-label>
                  {{ ability.ability.name | titlecase }}
                  <span *ngIf="ability.is_hidden"> (Oculta)</span>
                </ion-label>
              </ion-chip>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
      <div class="stats-panel-premium">
        <ion-card class="stats-card premium-glass">
          <ion-card-header>
            <ion-card-title>Estatísticas</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="stats-list">
              <div class="stat-item" *ngFor="let stat of pokemon.stats">
                <div class="stat-header">
                  <span class="stat-name">{{ getStatName(stat.stat.name) }}</span>
                  <span class="stat-value">{{ stat.base_stat }}</span>
                </div>
                <div class="stat-bar" [attr.title]="stat.base_stat">
                  <div class="stat-fill animated-stat-fill"
                       [style.width.%]="getStatPercentage(stat.base_stat)"
                       [style.background]="stat.base_stat | statColor">
                  </div>
                </div>
              </div>
            </div>
            <div class="stats-total">
              <strong>Total: {{ getTotalStats() }}</strong>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
    <!-- Loading -->
    <div class="modal-content" *ngIf="loading">
      <app-loading-spinner [overlay]="false" size="medium"></app-loading-spinner>
    </div>
    <!-- Error State -->
    <div class="modal-content" *ngIf="!loading && !pokemon">
      <div class="error-state">
        <ion-icon name="alert-circle-outline" size="large"></ion-icon>
        <h2>Erro ao carregar</h2>
        <p>Não foi possível carregar os detalhes do Pokémon.</p>
      </div>
    </div>
  </div>
</div> 
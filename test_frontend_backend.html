<!DOCTYPE html>
<html>
<head>
    <title>Teste Frontend - Backend</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Teste Conex√£o Frontend ‚Üí Backend</h1>
    <button onclick="testLocal()">Testar Backend Local</button>
    <button onclick="testProduction()">Testar Backend Produ√ß√£o</button>
    <button onclick="testSeed()">Testar Seed Produ√ß√£o</button>
    <div id="results"></div>

    <script>
        function addResult(message, isSuccess) {
            const div = document.createElement('div');
            div.className = `result ${isSuccess ? 'success' : 'error'}`;
            div.innerHTML = message;
            document.getElementById('results').appendChild(div);
            console.log(message);
        }

        async function testLocal() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>Teste Backend Local:</h2>';

            try {
                // Teste Health
                const healthResponse = await fetch('http://localhost:8000/health');
                const healthData = await healthResponse.json();
                addResult(`‚úÖ Health: ${healthResponse.status} - ${JSON.stringify(healthData)}`, true);

                // Teste Ranking
                const rankingResponse = await fetch('http://localhost:8000/api/v1/ranking/');
                const rankingData = await rankingResponse.json();
                addResult(`‚úÖ Ranking: ${rankingResponse.status} - ${rankingData.length} itens`, true);
                addResult(`üìã Dados: ${JSON.stringify(rankingData.slice(0, 2))}`, true);

            } catch (error) {
                addResult(`‚ùå Erro: ${error.message}`, false);
            }
        }

        async function testProduction() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>Teste Backend Produ√ß√£o:</h2>';

            try {
                // Teste Health
                const healthResponse = await fetch('https://pokeapi-la6k.onrender.com/health');
                const healthData = await healthResponse.json();
                addResult(`‚úÖ Health: ${healthResponse.status} - ${JSON.stringify(healthData)}`, true);

                // Teste Ranking
                const rankingResponse = await fetch('https://pokeapi-la6k.onrender.com/api/v1/ranking/');
                const rankingData = await rankingResponse.json();
                addResult(`‚úÖ Ranking: ${rankingResponse.status} - ${rankingData.length} itens`, true);
                addResult(`üìã Dados: ${JSON.stringify(rankingData.slice(0, 2))}`, true);

            } catch (error) {
                addResult(`‚ùå Erro: ${error.message}`, false);
            }
        }

        async function testSeed() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>Teste Seed Produ√ß√£o:</h2>';

            try {
                // Reset Database
                const resetResponse = await fetch('https://pokeapi-la6k.onrender.com/admin/reset-database', {
                    method: 'POST'
                });
                const resetData = await resetResponse.json();
                addResult(`‚úÖ Reset: ${resetResponse.status} - ${JSON.stringify(resetData)}`, true);

                // Seed Data
                const seedResponse = await fetch('https://pokeapi-la6k.onrender.com/admin/seed-data', {
                    method: 'POST'
                });
                const seedData = await seedResponse.json();
                addResult(`‚úÖ Seed: ${seedResponse.status} - ${JSON.stringify(seedData)}`, true);

                // Teste Ranking ap√≥s seed
                const rankingResponse = await fetch('https://pokeapi-la6k.onrender.com/api/v1/ranking/');
                const rankingData = await rankingResponse.json();
                addResult(`‚úÖ Ranking p√≥s-seed: ${rankingResponse.status} - ${rankingData.length} itens`, true);
                addResult(`üìã Dados: ${JSON.stringify(rankingData.slice(0, 2))}`, true);

            } catch (error) {
                addResult(`‚ùå Erro: ${error.message}`, false);
            }
        }
    </script>
</body>
</html>

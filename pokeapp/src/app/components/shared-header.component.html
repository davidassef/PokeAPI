<ion-header [translucent]="true">
  <ion-toolbar>
    <!-- BotÃ£o voltar (quando necessÃ¡rio) -->
    <ion-buttons slot="start" *ngIf="showBackButton">
      <ion-button fill="clear" (click)="goBack()" [attr.aria-label]="'nav.back' | translate">
        <ion-icon name="arrow-back-outline"></ion-icon>
        <span class="back-text">{{ 'nav.back' | translate }}</span>
      </ion-button>
    </ion-buttons>

    <!-- TÃ­tulo principal -->
    <ion-title>
      <div class="header-brand" *ngIf="!showBackButton">
        <div class="logo">ğŸ”¥</div>
        <div class="brand-text">
          <h1>{{ title }}</h1>
          <p *ngIf="subtitle">{{ subtitle }}</p>
        </div>
      </div>
      <!-- TÃ­tulo simples para pÃ¡ginas internas -->
      <div class="simple-title" *ngIf="showBackButton">
        {{ title }}
      </div>
    </ion-title>

    <!-- ConteÃºdo customizado do slot end -->
    <ng-content select="[slot=end]"></ng-content>

    <!-- UtilitÃ¡rios do header (player + idioma) apenas em desktop -->
    <ion-buttons slot="end" class="header-utilities" [class.desktop-only]="!showBackButton">
      <!-- Player de MÃºsica Minimalista -->
      <div class="audio-player-minimal" *ngIf="isAudioEnabled" aria-label="Player de mÃºsica da PokÃ©dex">
        <!-- BotÃ£o Play/Pause -->
        <button
          class="player-btn play-pause"
          (click)="togglePlayPause()"
          [attr.aria-label]="isAudioPlaying ? 'Pausar mÃºsica' : 'Tocar mÃºsica'">
          {{ isAudioPlaying ? 'â¸ï¸' : 'â–¶ï¸' }}
        </button>

        <!-- BotÃ£o Restart -->
        <button
          class="player-btn restart"
          (click)="restartAudio()"
          aria-label="Reiniciar mÃºsica">
          ğŸ”„
        </button>

        <!-- Controle de Volume com botÃµes -->
        <div class="volume-control">
          <button class="volume-btn" (click)="decreaseVolume()" aria-label="Diminuir volume">ğŸ”‰</button>
          <span class="volume-display">{{ audioVolume }}%</span>
          <button class="volume-btn" (click)="increaseVolume()" aria-label="Aumentar volume">ğŸ”Š</button>
        </div>

        <!-- Indicador visual quando tocando -->
        <div class="playing-indicator" *ngIf="isAudioPlaying">
          <div class="pulse">ğŸµ</div>
        </div>
      </div>

      <!-- Seletor de idioma -->
      <ion-button
        fill="clear"
        (click)="toggleLanguage()"
        class="nav-btn lang-btn">
        <ion-icon name="language-outline"></ion-icon>
        <span>{{ currentLanguage.toUpperCase() }}</span>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
